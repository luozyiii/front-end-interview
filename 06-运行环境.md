# 运行环境

- 运行环境即浏览器（server端有node.js）
- 下载网页代码，渲染出页面，期间会执行若干JS
- 要保证代码在浏览器中：稳定且高效

## 网页加载过程
### 题目
- 从输入url到渲染出页面的整个过程

- window.onload 和 DOMContentLoaded 的区别
window.onload 页面的全部资源加载完才会执行，包括图片、视频等；
DOMContentLoaded DOM 渲染完即可执行，此时图片、视频还可能没有加载完;

### 加载资源的形式
- html 代码
- 媒体文件，如图片、视频等
- JavaScript css

### 加载资源的过程
- DNS 解析：域名 -> IP 地址
- 浏览器根据IP地址向服务器发起http请求
- 服务器处理http请求，并返回给浏览器

### 渲染页面的过程
- 根据 HTML 代码生成 DOM Tree
- 根据 CSS 代码生成 CSSOM
- 将 DOM Tree 和 CSSOM整合过程 Render Tree
- 根据 Render Tree 渲染页面
- 遇到 `<script>` 则暂停渲染，优先加载并执行JS代码，完成再继续
- 直至把 Render Tree 渲染完成

### 思考
- 为何建议把css放在head中？ (放在最后，会引发重渲染)
- 为何建议JS放在body最后？ (JS 会暂停渲染，不放最后会造成页面卡顿)

## 性能优化
## 安全
